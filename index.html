<html>
	<head>
		<title>Grid Capture</title>
		<link rel="stylesheet" type="text/css" href="stylesheet.css" />
		<script type="text/javascript" src="Kinetic.js"></script>
		<script type="text/javascript" src="game.js"></script>
		<script src="jquery.js"></script>
		<script src="jquery-ui.js"></script>
		<script>
		function exchange(id){
			var ie=document.all&&!window.opera? document.all : 0
			var frmObj=ie? ie[id] : document.getElementById(id)
			var toObj=ie? ie[id+'b'] : document.getElementById(id+'b')
			toObj.style.width=frmObj.offsetWidth+7+'px'
			frmObj.style.display='none';
			toObj.style.display='inline';
			toObj.value=frmObj.innerHTML
			toObj.focus();
			toObj.select();
		}
		function exchangeBack(id){
			var ie=document.all&&!window.opera? document.all : 0
			var frmObj=ie? ie[id] : document.getElementById(id)
			var toObj=ie? ie[id.substr(0,id.length - 1)] : document.getElementById(id.substr(0,id.length - 1))
			frmObj.style.display='none';
			toObj.style.display='inline';
			console.log(frmObj.innerHTML);
			toObj.innerHTML=frmObj.value;
		}
  		</script>
	</head>
	<body>
		<h1>Grid Capture!</h1>
		<div id="PlayerInfo"></div>
		<div id="container"></div>
		<a href="#" id="dialog-link" class="ui-state-default ui-corner-all"><span class="ui-icon ui-icon-newwin"></span>Settings</a>
		<div id="settingsDialog" title="Settings">
			<div id="playerNameSettings" title="Settings">
		</div>



		<script>
			initgame('gameCanvas');
			$( "#settingsDialog" ).dialog({
				autoOpen: false,
				width: 400,
				buttons: [
					{
						text: "Save",
						click: function() {
							var playerNames = $('#playerNameSettings input').map(function(){return $(this).val();}).get();
								saveSettings(playerNames);
							for (i = 0; i < $('#playerNameSettings input').length; i++)
							{
								console.log($('#playerNameSettings input')[i].id);
								exchangeBack($('#playerNameSettings input')[i].id);
							}
							$( this ).dialog( "close" );
						}
					},
					{
						text: "Cancel",
						click: function() {
							$( this ).dialog( "close" );
						}
					}
				]
			});
			  // Link to open the dialog
			$( "#dialog-link" ).click(function( event ) {
				$( "#settingsDialog" ).dialog( "open" );
				event.preventDefault();
			});
		</script>

	</body>
</html>